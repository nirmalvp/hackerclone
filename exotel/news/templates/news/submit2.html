{% extends 'base.html' %}
{% load staticfiles %}
{% block content %}

<div class="row">
<div class='col-md-6 col-sm-offset-3'>
<form role="form" action={% url 'submit' %} method="POST">
{% csrf_token %}
<div class="col-md-9">
  <div class="form-group">
    <label for="linktitle">Title:</label>
    <input type="text" class="form-control" id="linktitle" name="linktitle" readonly="readonly" required>
    <div id="loading" style="display:none">
      <img id="loading-image" src="{% static 'img/ajax-loader.gif' %}" alt="Loading..." />
    </div>
  </div>
  <div class="form-group">
    <label for="linkurl">Link:</label>
    <div class="input-group">
      <input type="text" class="form-control" name="linkurl" id="linkurl">
      <span class="input-group-btn">
          <button class="btn btn-default" type="button" id="getTitle">Click me</button>
      </span>
    </div>
  </div>
 <div class="form-group">
    <button type="submit" class="btn btn-default" id="submit" disabled="disabled">Submit</button>
  </div>
</div>
<div class="row">

</div>

</form>

</div>
{% endblock %}

{% block jquery %}
$('#loading').hide();
$('#linkurl').on('input', function() {
    $('#linktitle').val('');
    $('#submit').attr('disabled', 'disabled');
});

$("#getTitle").click(function(event){
    var linkurl = $('#linkurl').val();
    var result = linkurl.replace(/.*?:\/\//g, "");
    vge
    url+= result
    console.log(url)
    event.preventDefault();
    $('#loading').show();
    $.ajax({
        url: url,
        complete: function(data) {
            $('#linktitle').val(data.responseText);
            $('#loading').hide();
            $('#submit').removeAttr('disabled');
         }
    });

});
{% endblock %}





